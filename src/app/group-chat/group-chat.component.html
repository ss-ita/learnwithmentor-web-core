<div>
  <button id='chatBlock' class="open-button" (click)="openForm()">
    <span class="mt-name">Group chat</span>
    <i class="material-icons">group</i>
  </button>
  <div class="form-popup" id="groupChatForm">  
    <div id="main-container" style="text-align:center">        
        <form #chatForm="ngForm">
          <button type="button" class="mybutton" (click)="closeForm()">
            <span class="mt-name">Group chat</span>
            <i class="material-icons">group</i>
          </button>
          <div class="container">
            <div class="center-spiner" *ngIf="loading">
                <mat-spinner class="spiner-margins"></mat-spinner>
            </div>
            <div class="chatlogs" #scrollMe [scrollTop]="scrollMe.scrollHeight" *ngIf="messages.length > 0" >
              <div *ngFor="let message of messages">
                <div *ngIf="userId!=message.SenderId">
                  <div class="chat">
                    <div class="user-photo">Img</div>
                    <div class="friendsmes">
                      <p class="name-message">{{message.FullName}}: </p>
                      <p class="text-message">{{message.TextMessage}}</p>
                      <p class="time-right">{{message.Time}}</p>
                    </div>
                  </div>
                </div>
                <div *ngIf="userId===message.SenderId">
                  <div class="chat">
                    <div class="selfmes">
                      <p class="text-message">{{message.TextMessage}}</p>
                      <p class="time-right">{{message.Time}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="chat-form">
              <input autofocus type="text" id="messageInput" name="message" [(ngModel)]="message" required #reference>
              <button type="submit" class="send-btn" (click)="sendMessageToGroup()" (click)="reference.value=''">Send</button>
            </div>
          </div>
        </form>         
    </div>   
  </div>
</div>
